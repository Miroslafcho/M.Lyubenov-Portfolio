<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>Form</title>
</head>
<body>
<script src="https://www.google.com/recaptcha/api.js"></script>

<form id="contact-form" method="post" action="/send">
    <input name="message" required/>
  
    <button type="submit">Send</button>
  
    <div class="g-recaptcha"
         data-sitekey="xxx"
         data-callback="onCaptchaValidated"
         data-size="invisible">
    </div>
</form>

<script>
    var isCaptchaValidated = false;
    var form = document.getElementById("contact-form");

    function onCaptchaValidated() {
        isCaptchaValidated = true;
        form.submit();
    }

    form.addEventListener("submit", function (event) {
        if (!isCaptchaValidated) {
            event.preventDefault();
            grecaptcha.execute();
        }
    });
</script>
</body>
</html>
